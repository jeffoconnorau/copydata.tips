<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>vCenter PowerShell PowerCLI command to to change a VMDK disk from non-persistent to persistent without powering down the VM | Copy Data Tips</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="vCenter PowerShell PowerCLI command to to change a VMDK disk from non-persistent to persistent without powering down the VM" /> <meta name="author" content="joconnor" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="While I am certain this already posted on the net in a few places, I wanted to capture it here, as it is a question I get asked often by customers. Especially seeing as the manual method requires shutting down a VM to make the change." /> <meta property="og:description" content="While I am certain this already posted on the net in a few places, I wanted to capture it here, as it is a question I get asked often by customers. Especially seeing as the manual method requires shutting down a VM to make the change." /> <link rel="canonical" href="http://localhost:4000/2014/04/vcenter-powershell-powercli-command-change-vmdk-disk-non-persistent-persistent-without-powering-vm/" /> <meta property="og:url" content="http://localhost:4000/2014/04/vcenter-powershell-powercli-command-change-vmdk-disk-non-persistent-persistent-without-powering-vm/" /> <meta property="og:site_name" content="Copy Data Tips" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2014-04-17T11:12:24+10:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="vCenter PowerShell PowerCLI command to to change a VMDK disk from non-persistent to persistent without powering down the VM" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"joconnor"},"dateModified":"2023-04-16T17:57:41+10:00","datePublished":"2014-04-17T11:12:24+10:00","description":"While I am certain this already posted on the net in a few places, I wanted to capture it here, as it is a question I get asked often by customers. Especially seeing as the manual method requires shutting down a VM to make the change.","headline":"vCenter PowerShell PowerCLI command to to change a VMDK disk from non-persistent to persistent without powering down the VM","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2014/04/vcenter-powershell-powercli-command-change-vmdk-disk-non-persistent-persistent-without-powering-vm/"},"url":"http://localhost:4000/2014/04/vcenter-powershell-powercli-command-change-vmdk-disk-non-persistent-persistent-without-powering-vm/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/author.html" class="nav-list-link">Author</a></li><li class="nav-list-item"><a href="/downloads.html" class="nav-list-link">Downloads</a></li><li class="nav-list-item"><a href="/home.html" class="nav-list-link">Home</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search" aria-label="Search" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <p>2014-04-17 11:12:24 +1000 - Written by joconnor</p> <p>While I am certain this already posted on the net in a few places, I wanted to capture it here, as it is a question I get asked often by customers. Especially seeing as the manual method requires shutting down a VM to make the change.</p> <p><span style="text-decoration: underline;">Instructions</span></p> <p>Just replace the text <span class="s1" style="font-weight: inherit; font-style: inherit;"><em>&lt;vcenter_dns_or_ipaddress&gt;</em> </span>with the IP address or FQDN of the vCenter host. You will be prompted to login to vCenter, and will require enough privileges to modify the VM you need to edit.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;pre class="p3" style="color: #3d3d3d;"&gt;&lt;span style="font-weight: inherit; font-style: inherit;"&gt;connect-viserver &lt;em&gt;&lt;vcenter_dns_or_ipaddress&gt;&lt;/em&gt;
&lt;/span&gt;
</code></pre></div></div> <p>Then replace the <span class="s1" style="font-weight: inherit; font-style: inherit;"><em>&lt;vm_name&gt;</em> </span>with the name of the virtual machine you wish to change one or many of its disks to Independent Persistent. It will provide multiple prompts based on how many disks the VM has, and ask you to confirm each one individually, or all if desired.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;pre class="p3" style="color: #3d3d3d;"&gt;&lt;span style="font-weight: inherit; font-style: inherit;"&gt;Get-HardDisk -VM &lt;em style="font-weight: inherit;"&gt;&lt;vm_name&gt;&lt;/em&gt; | Set-HardDisk -Persistence "IndependentPersistent"&lt;/span&gt;
</code></pre></div></div> <p>Then if required, run the command below to change the disk back to Persistent, and again select Y for each disk you want set back.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;pre class="p3" style="color: #3d3d3d;"&gt;&lt;span style="font-weight: inherit; font-style: inherit;"&gt;Get-HardDisk -VM &lt;em style="font-weight: inherit;"&gt;&lt;vm_name&gt;&lt;/em&gt; | Set-HardDisk -Persistence "Persistent"&lt;/span&gt;
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
